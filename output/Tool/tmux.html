<!DOCTYPE HTML>
<html>
    <head>
        <link rel="Stylesheet" type="text/css" href="/static/css/style.css">
        <link rel="Stylesheet" type="text/css" href="/static/css/tango.css">
        <title>Tmux - Vanechu · Notes</title>
        <meta name="keywords" content=""/>
        <meta name="description" content=""/>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>

    <body>
<!--         <a href="https://github.com/tankywoo/wiki.tankywoo.com"><img style="position: fixed; top: 0; right: 0; border: 0;" src="https://camo.githubusercontent.com/365986a132ccd6a44c23a9169022c0b5c890c387/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f7265645f6161303030302e706e67" alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_red_aa0000.png"></a> -->
        <!--
        <div id="nav">
            <ul>
                <li><a href="http://tankywoo.com"></a></li>
                <li><a href="">Github</a></li>
                <li><a href="">Simiki</a></li>
            </ul>
        </div>
        -->
        <div id="container">
            
    <div id="header">
        <div id="post-nav">
            
            <a href="/">Home</a> » <a href="/#Tool">Tool</a> » Tmux
            
        </div>
    </div>
    <div class="clearfix"></div>
    <div id="title">Tmux</div>
    <div id="content">
        <h1 id="reference">Reference</h1>
<p><a href="http://kumu-linux.github.io/blog/2013/08/06/tmux/">Linux下终端利器tmux</a></p>
<h2 id="notion">Notion</h2>
<p>tmux contains:</p>
<ul>
<li>session :一个服务器可以包含多个会话</li>
<li>window :一个会话可以包含多个窗口</li>
<li>pane :一个窗口可以包含多个面板[强悍的分屏]</li>
</ul>
<h2 id="usage">Usage</h2>
<p><code>Ctrl+b</code> first, then: </p>
<h3 id="basic">Basic</h3>
<div class="hlcode"><pre><span class="o">?</span>     <span class="err">列出所有快捷键；按</span><span class="n">q</span><span class="err">返回</span>
<span class="n">d</span>     <span class="err">脱离当前会话</span><span class="p">,</span><span class="err">可暂时返回</span><span class="n">Shell</span><span class="err">界面，输入</span><span class="n">tmux</span> <span class="n">attach</span><span class="err">能够重新进入之前会话</span>
<span class="n">s</span>     <span class="err">选择并切换会话；在同时开启了多个会话时使用</span>
<span class="n">D</span>     <span class="err">选择要脱离的会话；在同时开启了多个会话时使用</span>
<span class="o">:</span>     <span class="err">进入命令行模式；此时可输入支持的命令，例如</span><span class="n">kill</span><span class="o">-</span><span class="n">server</span><span class="err">所有</span><span class="n">tmux</span><span class="err">会话</span>
<span class="p">[</span>     <span class="err">复制模式，光标移动到复制内容位置，空格键开始，方向键选择复制，回车确认，</span><span class="n">q</span><span class="o">/</span><span class="n">Esc</span><span class="err">退出</span>
<span class="p">]</span>     <span class="err">进入粘贴模式，粘贴之前复制的内容，按</span><span class="n">q</span><span class="o">/</span><span class="n">Esc</span><span class="err">退出</span>
<span class="o">~</span>     <span class="err">列出提示信息缓存；其中包含了之前</span><span class="n">tmux</span><span class="err">返回的各种提示信息</span>
<span class="n">t</span>     <span class="err">显示当前的时间</span>
<span class="n">Ctrl</span><span class="o">+</span><span class="n">z</span>  <span class="err">挂起当前会话</span>
</pre></div>


<h3 id="window-keys">Window keys</h3>
<div class="hlcode"><pre><span class="n">c</span>     <span class="err">创建新窗口</span>
<span class="o">&amp;</span>     <span class="err">关闭当前窗口</span>
<span class="n">Number</span>     <span class="err">切换到指定窗口</span>
<span class="n">p</span>     <span class="err">切换至上一窗口</span>
<span class="n">n</span>     <span class="err">切换至下一窗口</span>
<span class="n">l</span>     <span class="err">前后窗口间互相切换</span>
<span class="n">w</span>     <span class="err">通过窗口列表切换窗口</span>
<span class="p">,</span>     <span class="err">重命名当前窗口，便于识别</span>
<span class="p">.</span>     <span class="err">修改当前窗口编号，相当于重新排序</span>
<span class="n">f</span>     <span class="err">在所有窗口中查找关键词，便于窗口多了切换</span>
</pre></div>


<h3 id="panel-keys">Panel keys</h3>
<div class="hlcode"><pre><span class="s">&quot;           将当前面板上下分屏</span>
<span class="o">%</span>           <span class="err">将当前面板左右分屏</span>
<span class="n">x</span>           <span class="err">关闭当前分屏</span>
<span class="o">!</span>           <span class="err">将当前面板置于新窗口</span><span class="p">,</span><span class="err">即新建一个窗口</span><span class="p">,</span><span class="err">其中仅包含当前面板</span>
<span class="n">Ctrl</span><span class="o">+</span><span class="n">Arrow</span>  <span class="err">以</span><span class="mi">1</span><span class="err">个单元格为单位移动边缘以调整当前面板大小</span>
<span class="n">Alt</span><span class="o">+</span><span class="n">Arrow</span>   <span class="err">以</span><span class="mi">5</span><span class="err">个单元格为单位移动边缘以调整当前面板大小</span>
<span class="n">Space</span>       <span class="err">可以在默认面板布局中切换，试试就知道了</span>
<span class="n">q</span>           <span class="err">显示面板编号</span>
<span class="n">o</span>           <span class="err">选择当前窗口中下一个面板</span>
<span class="n">Arrow</span>       <span class="err">移动光标选择对应面板</span>
<span class="p">{</span>           <span class="err">向前置换当前面板</span>
<span class="p">}</span>           <span class="err">向后置换当前面板</span>
<span class="n">Alt</span><span class="o">+</span><span class="n">o</span>       <span class="err">逆时针旋转当前窗口的面板</span>
<span class="n">Ctrl</span><span class="o">+</span><span class="n">o</span>      <span class="err">顺时针旋转当前窗口的面板</span>
<span class="n">z</span>           <span class="n">tmux</span> <span class="mf">1.8</span><span class="err">新特性，最大化当前所在面板</span>
</pre></div>


<h2 id="tmuxconf">.tmux.conf</h2>
<p><code>kumu's</code> config</p>
<div class="hlcode"><pre><span class="c1"># Set prefix key to Ctrl-a</span>
<span class="s-Atom">unbind</span><span class="o">-</span><span class="s-Atom">key</span> <span class="nv">C</span><span class="o">-</span><span class="s-Atom">b</span>
<span class="s-Atom">set</span><span class="o">-</span><span class="s-Atom">option</span> <span class="o">-</span><span class="s-Atom">g</span> <span class="s-Atom">prefix</span> <span class="nv">C</span><span class="o">-</span><span class="s-Atom">a</span>
<span class="s-Atom">bind</span><span class="o">-</span><span class="s-Atom">key</span> <span class="nv">C</span><span class="o">-</span><span class="s-Atom">a</span> <span class="s-Atom">last</span><span class="o">-</span><span class="s-Atom">window</span> <span class="s-Atom">#</span> <span class="s-Atom">方便切换，个人习惯</span>
<span class="s-Atom">bind</span><span class="o">-</span><span class="s-Atom">key</span> <span class="s-Atom">a</span> <span class="s-Atom">send</span><span class="o">-</span><span class="s-Atom">prefix</span>
<span class="s-Atom">#</span> <span class="s-Atom">shell下的Ctrl</span><span class="o">+</span><span class="s-Atom">a切换到行首在此配置下失效，此处设置之后Ctrl</span><span class="o">+</span><span class="s-Atom">a再按a即可切换至shell行首</span>

<span class="s-Atom">#</span> <span class="s-Atom">reload</span> <span class="s-Atom">settings</span> <span class="s-Atom">#</span> <span class="s-Atom">重新读取加载配置文件</span>
<span class="s-Atom">bind</span> <span class="nv">R</span> <span class="s-Atom">source</span><span class="o">-</span><span class="s-Atom">file</span> <span class="s-Atom">~/.tmux</span><span class="p">.</span><span class="s-Atom">conf</span> <span class="s-Atom">\</span><span class="p">;</span> <span class="s-Atom">display</span><span class="o">-</span><span class="s-Atom">message</span> <span class="s2">&quot;Config reloaded...&quot;</span>

<span class="s-Atom">#</span> <span class="nv">Ctrl</span><span class="o">-</span><span class="nv">Left</span><span class="o">/</span><span class="nv">Right</span> <span class="s-Atom">cycles</span> <span class="s-Atom">thru</span> <span class="nf">windows</span> <span class="p">(</span><span class="s-Atom">no</span> <span class="s-Atom">prefix</span><span class="p">)</span> 
<span class="s-Atom">#</span> <span class="s-Atom">不使用prefix键，使用Ctrl和左右方向键方便切换窗口</span>
<span class="s-Atom">bind</span><span class="o">-</span><span class="s-Atom">key</span> <span class="o">-</span><span class="s-Atom">n</span> <span class="s2">&quot;C-Left&quot;</span> <span class="s-Atom">select</span><span class="o">-</span><span class="s-Atom">window</span> <span class="o">-</span><span class="nf">t</span> <span class="o">:-</span>
<span class="s-Atom">bind</span><span class="o">-</span><span class="s-Atom">key</span> <span class="o">-</span><span class="s-Atom">n</span> <span class="s2">&quot;C-Right&quot;</span> <span class="s-Atom">select</span><span class="o">-</span><span class="s-Atom">window</span> <span class="o">-</span><span class="s-Atom">t</span> <span class="s-Atom">:+</span>

<span class="s-Atom">#</span> <span class="s-Atom">displays</span> 
<span class="s-Atom">bind</span><span class="o">-</span><span class="s-Atom">key</span> <span class="o">*</span> <span class="s-Atom">list</span><span class="o">-</span><span class="s-Atom">clients</span>

<span class="s-Atom">set</span> <span class="o">-</span><span class="s-Atom">g</span> <span class="s-Atom">default</span><span class="o">-</span><span class="s-Atom">terminal</span> <span class="s2">&quot;screen-256color&quot;</span>   <span class="s-Atom">#</span> <span class="s-Atom">use</span> <span class="m">256</span> <span class="s-Atom">colors</span>
<span class="s-Atom">set</span> <span class="o">-</span><span class="s-Atom">g</span> <span class="s-Atom">display</span><span class="o">-</span><span class="s-Atom">time</span> <span class="m">5000</span>                    <span class="s-Atom">#</span> <span class="s-Atom">status</span> <span class="s-Atom">line</span> <span class="s-Atom">messages</span> <span class="s-Atom">display</span>
<span class="s-Atom">set</span> <span class="o">-</span><span class="s-Atom">g</span> <span class="s-Atom">status</span><span class="o">-</span><span class="s-Atom">utf8</span> <span class="s-Atom">on</span>                       <span class="s-Atom">#</span> <span class="s-Atom">enable</span> <span class="s-Atom">utf</span><span class="o">-</span><span class="m">8</span> 
<span class="s-Atom">set</span> <span class="o">-</span><span class="s-Atom">g</span> <span class="s-Atom">history</span><span class="o">-</span><span class="s-Atom">limit</span> <span class="m">100000</span>                 <span class="s-Atom">#</span> <span class="s-Atom">scrollback</span> <span class="s-Atom">buffer</span> <span class="s-Atom">n</span> <span class="s-Atom">lines</span>
<span class="s-Atom">setw</span> <span class="o">-</span><span class="s-Atom">g</span> <span class="s-Atom">mode</span><span class="o">-</span><span class="s-Atom">keys</span> <span class="s-Atom">vi</span>                        <span class="s-Atom">#</span> <span class="s-Atom">use</span> <span class="s-Atom">vi</span> <span class="s-Atom">mode</span>

<span class="s-Atom">#</span> <span class="s-Atom">start</span> <span class="s-Atom">window</span> <span class="s-Atom">indexing</span> <span class="s-Atom">at</span> <span class="s-Atom">one</span> <span class="s-Atom">instead</span> <span class="s-Atom">of</span> <span class="s-Atom">zero</span> <span class="s-Atom">使窗口从1开始，默认从0开始</span> 
<span class="s-Atom">set</span> <span class="o">-</span><span class="s-Atom">g</span> <span class="s-Atom">base</span><span class="o">-</span><span class="s-Atom">index</span> <span class="m">1</span>

<span class="s-Atom">#</span> <span class="s-Atom">key</span> <span class="s-Atom">bindings</span> <span class="s-Atom">for</span> <span class="s-Atom">horizontal</span> <span class="s-Atom">and</span> <span class="s-Atom">vertical</span> <span class="s-Atom">panes</span>
<span class="s-Atom">unbind</span> <span class="c1">%</span>
<span class="s-Atom">bind</span> <span class="p">|</span> <span class="s-Atom">split</span><span class="o">-</span><span class="s-Atom">window</span> <span class="o">-</span><span class="s-Atom">h</span>      <span class="s-Atom">#</span> <span class="s-Atom">使用</span><span class="p">|</span><span class="s-Atom">竖屏，方便分屏</span>
<span class="s-Atom">unbind</span> <span class="s-Atom">&#39;&quot;&#39;</span>
<span class="s-Atom">bind</span> <span class="o">-</span> <span class="s-Atom">split</span><span class="o">-</span><span class="s-Atom">window</span> <span class="o">-</span><span class="s-Atom">v</span>      <span class="s-Atom">#</span> <span class="s-Atom">使用-横屏，方便分屏</span>

<span class="s-Atom">#</span> <span class="s-Atom">window</span> <span class="s-Atom">title</span> <span class="nf">string</span> <span class="p">(</span><span class="s-Atom">uses</span> <span class="s-Atom">statusbar</span> <span class="s-Atom">variables</span><span class="p">)</span>
<span class="s-Atom">set</span> <span class="o">-</span><span class="s-Atom">g</span> <span class="s-Atom">set</span><span class="o">-</span><span class="s-Atom">titles</span><span class="o">-</span><span class="s-Atom">string</span> <span class="s-Atom">&#39;#T&#39;</span>

<span class="s-Atom">#</span> <span class="s-Atom">status</span> <span class="s-Atom">bar</span> <span class="s-Atom">with</span> <span class="s-Atom">load</span> <span class="s-Atom">and</span> <span class="s-Atom">time</span> 
<span class="s-Atom">set</span> <span class="o">-</span><span class="s-Atom">g</span> <span class="s-Atom">status</span><span class="o">-</span><span class="s-Atom">bg</span> <span class="s-Atom">blue</span>
<span class="s-Atom">set</span> <span class="o">-</span><span class="s-Atom">g</span> <span class="s-Atom">status</span><span class="o">-</span><span class="s-Atom">fg</span> <span class="s-Atom">&#39;#bbbbbb&#39;</span>
<span class="s-Atom">set</span> <span class="o">-</span><span class="s-Atom">g</span> <span class="s-Atom">status</span><span class="o">-</span><span class="s-Atom">left</span><span class="o">-</span><span class="s-Atom">fg</span> <span class="s-Atom">green</span>
<span class="s-Atom">set</span> <span class="o">-</span><span class="s-Atom">g</span> <span class="s-Atom">status</span><span class="o">-</span><span class="s-Atom">left</span><span class="o">-</span><span class="s-Atom">bg</span> <span class="s-Atom">blue</span>
<span class="s-Atom">set</span> <span class="o">-</span><span class="s-Atom">g</span> <span class="s-Atom">status</span><span class="o">-</span><span class="s-Atom">right</span><span class="o">-</span><span class="s-Atom">fg</span> <span class="s-Atom">green</span>
<span class="s-Atom">set</span> <span class="o">-</span><span class="s-Atom">g</span> <span class="s-Atom">status</span><span class="o">-</span><span class="s-Atom">right</span><span class="o">-</span><span class="s-Atom">bg</span> <span class="s-Atom">blue</span>
<span class="s-Atom">set</span> <span class="o">-</span><span class="s-Atom">g</span> <span class="s-Atom">status</span><span class="o">-</span><span class="s-Atom">left</span><span class="o">-</span><span class="s-Atom">length</span> <span class="m">90</span>
<span class="s-Atom">set</span> <span class="o">-</span><span class="s-Atom">g</span> <span class="s-Atom">status</span><span class="o">-</span><span class="s-Atom">right</span><span class="o">-</span><span class="s-Atom">length</span> <span class="m">90</span>
<span class="s-Atom">set</span> <span class="o">-</span><span class="s-Atom">g</span> <span class="s-Atom">status</span><span class="o">-</span><span class="s-Atom">left</span> <span class="s-Atom">&#39;[#(whoami)]&#39;</span>
<span class="s-Atom">set</span> <span class="o">-</span><span class="s-Atom">g</span> <span class="s-Atom">status</span><span class="o">-</span><span class="s-Atom">right</span> <span class="s-Atom">&#39;[#(date +&quot; %m-%d %H:%M &quot;)]&#39;</span>
<span class="s-Atom">set</span> <span class="o">-</span><span class="s-Atom">g</span> <span class="s-Atom">status</span><span class="o">-</span><span class="s-Atom">justify</span> <span class="s2">&quot;centre&quot;</span>
<span class="s-Atom">set</span> <span class="o">-</span><span class="s-Atom">g</span> <span class="s-Atom">window</span><span class="o">-</span><span class="s-Atom">status</span><span class="o">-</span><span class="s-Atom">format</span> <span class="s-Atom">&#39;#I #W&#39;</span>
<span class="s-Atom">set</span> <span class="o">-</span><span class="s-Atom">g</span> <span class="s-Atom">window</span><span class="o">-</span><span class="s-Atom">status</span><span class="o">-</span><span class="s-Atom">current</span><span class="o">-</span><span class="s-Atom">format</span> <span class="s-Atom">&#39; #I #W &#39;</span>
<span class="s-Atom">setw</span> <span class="o">-</span><span class="s-Atom">g</span> <span class="s-Atom">window</span><span class="o">-</span><span class="s-Atom">status</span><span class="o">-</span><span class="s-Atom">current</span><span class="o">-</span><span class="s-Atom">bg</span> <span class="s-Atom">blue</span>
<span class="s-Atom">setw</span> <span class="o">-</span><span class="s-Atom">g</span> <span class="s-Atom">window</span><span class="o">-</span><span class="s-Atom">status</span><span class="o">-</span><span class="s-Atom">current</span><span class="o">-</span><span class="s-Atom">fg</span> <span class="s-Atom">green</span>

<span class="s-Atom">#</span> <span class="s-Atom">pane</span> <span class="s-Atom">border</span> <span class="s-Atom">colors</span>
<span class="s-Atom">set</span> <span class="o">-</span><span class="s-Atom">g</span> <span class="s-Atom">pane</span><span class="o">-</span><span class="s-Atom">active</span><span class="o">-</span><span class="s-Atom">border</span><span class="o">-</span><span class="s-Atom">fg</span> <span class="s-Atom">&#39;#55ff55&#39;</span>
<span class="s-Atom">set</span> <span class="o">-</span><span class="s-Atom">g</span> <span class="s-Atom">pane</span><span class="o">-</span><span class="s-Atom">border</span><span class="o">-</span><span class="s-Atom">fg</span> <span class="s-Atom">&#39;#555555&#39;</span>
</pre></div>


<h2 id="launch-with-script">Launch with script</h2>
<div class="hlcode"><pre><span class="n">tmux_init</span><span class="p">()</span>
<span class="p">{</span>
    <span class="n">tmux</span> <span class="n">new</span><span class="o">-</span><span class="n">session</span> <span class="o">-</span><span class="n">s</span> <span class="s">&quot;kumu&quot;</span> <span class="o">-</span><span class="n">d</span> <span class="o">-</span><span class="n">n</span> <span class="s">&quot;local&quot;</span>    <span class="err">#</span> <span class="err">开启一个会话</span>
    <span class="n">tmux</span> <span class="n">new</span><span class="o">-</span><span class="n">window</span> <span class="o">-</span><span class="n">n</span> <span class="s">&quot;other&quot;</span>          <span class="err">#</span> <span class="err">开启一个窗口</span>
    <span class="n">tmux</span> <span class="n">split</span><span class="o">-</span><span class="n">window</span> <span class="o">-</span><span class="n">h</span>                <span class="err">#</span> <span class="err">开启一个竖屏</span>
    <span class="n">tmux</span> <span class="n">split</span><span class="o">-</span><span class="n">window</span> <span class="o">-</span><span class="n">v</span> <span class="s">&quot;top&quot;</span>          <span class="err">#</span> <span class="err">开启一个横屏</span><span class="p">,</span><span class="err">并执行</span><span class="n">top</span><span class="err">命令</span>
    <span class="n">tmux</span> <span class="o">-</span><span class="mi">2</span> <span class="n">attach</span><span class="o">-</span><span class="n">session</span> <span class="o">-</span><span class="n">d</span>           <span class="err">#</span> <span class="n">tmux</span> <span class="o">-</span><span class="mi">2</span><span class="err">强制启用</span><span class="mi">256</span><span class="n">color</span><span class="err">，连接已开启的</span><span class="n">tmux</span>
<span class="p">}</span>

<span class="cp"># 判断是否已有开启的tmux会话，没有则开启</span>
<span class="k">if</span> <span class="n">which</span> <span class="n">tmux</span> <span class="mi">2</span><span class="o">&gt;&amp;</span><span class="mi">1</span> <span class="o">&gt;/</span><span class="n">dev</span><span class="o">/</span><span class="n">null</span><span class="p">;</span> <span class="n">then</span>
    <span class="n">test</span> <span class="o">-</span><span class="n">z</span> <span class="s">&quot;$TMUX&quot;</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="n">tmux</span> <span class="n">attach</span> <span class="o">||</span> <span class="n">tmux_init</span><span class="p">)</span>
<span class="n">fi</span>
</pre></div>
    </div>

        </div>
        <div id="footer">
            <span>
                Copyright © 2012-2014 vanechu.
                Powered by <a href="http://simiki.org/" target="_blank">Simiki</a>.
            </span>
        </div>
<script type="text/javascript">
	var _bdhmProtocol = (("https:" == document.location.protocol) ? " https://" : " http://");
	document.write(unescape("%3Cscript src='" + _bdhmProtocol + "hm.baidu.com/h.js%3F754de327571c0ba7ff50a61fc964e196' type='text/javascript'%3E%3C/script%3E"));
</script>
    </body>
</html>